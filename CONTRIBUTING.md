# 贡献指南

感谢你对 CodeWave 项目的关注！这份文档将帮助你了解如何参与项目开发。

## 目录
- [开发环境设置](#开发环境设置)
- [代码风格](#代码风格)
- [开发流程](#开发流程)
- [提交规范](#提交规范)
- [测试规范](#测试规范)
- [文档维护](#文档维护)

## 开发环境设置

### 系统要求
- Node.js 18+
- Python 3.10+
- pnpm 8+
- Poetry 2.0+

### 前端设置
1. 安装依赖：
   ```bash
   cd frontend
   pnpm install
   ```

2. 启动开发服务器：
   ```bash
   pnpm dev
   ```

### 后端设置
1. 安装依赖：
   ```bash
   cd backend
   poetry install
   ```

2. 启动开发服务器：
   ```bash
   poetry run uvicorn apps.main:app --reload
   ```

## 代码风格

我们使用自动化工具来保持代码风格的一致性。详细的工具配置和使用说明请参考 [开发工具使用指南](docs/development/tools.md)。

### 前端代码风格
- 使用 TypeScript
- 使用 Prettier 进行格式化
- 使用 ESLint 进行代码质量检查
- 遵循类型安全原则

### 后端代码风格
- 使用 Python 类型注解
- 使用 Black 进行格式化
- 使用 isort 进行导入排序
- 使用 Flake8 和 Ruff 进行代码质量检查

## 开发流程

### 分支管理
- `main`: 主分支，用于生产环境
- `develop`: 开发分支，用于开发环境
- `feature/*`: 功能分支，用于开发新功能
- `bugfix/*`: 修复分支，用于修复 bug
- `hotfix/*`: 热修复分支，用于紧急修复生产环境问题
- `style/*`: 代码风格分支，用于代码格式化和风格改进

详细的 Git 工作流程请参考 [Git 工作流指南](docs/development/git-workflow.md)。

### 开发步骤
1. 从最新的 develop 分支创建功能分支
2. 在功能分支上进行开发
3. 编写测试并确保通过
4. 提交代码并创建 Pull Request
5. 等待代码审查
6. 根据反馈进行修改
7. 合并到目标分支

## 提交规范

### 提交信息格式
```
<type>(<scope>): <subject>

<body>

<footer>
```

### 类型（type）
- feat: 新功能
- fix: 修复 bug
- docs: 文档更新
- style: 代码格式化
- refactor: 代码重构
- test: 测试相关
- chore: 构建过程或辅助工具的变动

### 提交前检查清单
1. 运行代码格式化检查
2. 运行代码质量检查
3. 运行类型检查
4. 运行单元测试
5. 确保所有检查都通过
6. 检查是否有未提交的配置文件
7. 确保不包含敏感信息

## 测试规范

### 测试覆盖率要求
- 语句覆盖率：>90%
- 分支覆盖率：>70%
- 函数覆盖率：>90%

### 测试原则
1. 单元测试应该是独立的
2. 测试应该是可重复的
3. 测试应该是自动化的
4. 测试应该覆盖边界条件
5. 测试应该包含正面和负面用例

详细的测试说明请参考 [开发工具使用指南](docs/development/tools.md#测试工具)。

## 文档维护

### 文档类型
1. API 文档
2. 使用说明
3. 开发指南
4. 架构文档
5. 部署文档

### 文档更新要求
- 代码变更时同步更新相关文档
- 保持文档的准确性和时效性
- 使用清晰的语言和结构
- 提供具体的示例

## 问题反馈

如果你发现了 bug 或有新功能建议，请：
1. 检查现有的 Issues 是否已经报告了该问题
2. 创建新的 Issue，并提供：
   - 问题的详细描述
   - 复现步骤
   - 期望的行为
   - 实际的行为
   - 相关的日志或截图

## 帮助和支持

如果你需要帮助：
1. 查看项目文档
2. 搜索现有的 Issues
3. 创建新的 Issue 提问
4. 通过项目的沟通渠道联系维护者
